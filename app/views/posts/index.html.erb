<div class="container">
  <div class = "card bg-light mb-3" style="width: 32rem;" >
    <div class = "card-body">
     <%= render "form", post: @post%> <!--brings new form to index-->
    </div>
  </div>
     <% @posts.reverse.each do |post| %>

        <article class = "card bg-light mb-3" style="width: 32rem;">

          <div class = "card-body border-top">
            <div class = "card-text">
              <strong><%= post.message %></strong>
            </div>

            <div class="card-body">
            <p><%= "Posted by #{post.user.username} on #{post.created_at.strftime("%H:%M:%S %B %Y")}" %></p>
            </div>
          
            <div class="card-link">
              <%= link_to 'Like', post_likes_path(post), method: :post %>
              <%= link_to "Edit", edit_post_path(post) %> 
              <%= link_to "Delete", post_path(post), method: :delete, data: { confirm: 'Are you sure?' } %> 
             <p><%= post.likes.count %> <%= (post.likes.count) == 1 ? 'Like' : 'Likes'%></p>
            </div>
          </div>
            
          <div class = "card-body border-top">
            <strong>Comments:</strong>
            <%= render post.comments%>           
            <%= bootstrap_form_with model: [ post, post.comments.build ], local: true do |form| %>
                    <%= form.text_area :content, placeholder: "Write your comment here!", skip_label: true, id:"content", :rows=>1, :cols=>20 %>
                    <%= form.submit id:"create_comment"%>
            <% end %>
          </div>
         
        </article>
    <% end %>

</div>
